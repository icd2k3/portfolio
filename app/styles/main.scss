/* MAIN.SCSS
- Overall styles for the site
*/

// IMPORTS ///////////////
@import "compass/css3/transition";
@import "compass/css3/transform";
@import "compass/css3/images";
@import "compass/css3/text-shadow";
@import '_mixins';
@import '_common';
@import '_fontcustom';
@import '_mediaqueries';
@import '_fallbacks';

// BODY & CONTAINER //////
html, body { @include size(100%, 100%); padding: 0; margin: 0; -webkit-overflow-scrolling: touch; }
body {
    @include font($family: $font-source-sans-pro, $color: $white, $size: 14px, $line-height: 24px);
    background: url(/images/background.png) repeat #000;
    background-color: $white;
    background-attachment: fixed;
    overflow-y: auto;
    overflow-x: hidden;
}

// GLOBAL ///////////////
// overall styles across all sections & elements
::selection {
    color: $lime;
    background: $black;
}
::-moz-selection {
    color: $lime;
    background: $black;
}
::-webkit-scrollbar {
    width: 8px;
}
::-webkit-scrollbar-track {
    background: $black;
}
::-webkit-scrollbar-thumb {
    background: $lime;
}
::-webkit-scrollbar-thumb:window-inactive {
    background: $lime;
}
a {
    @include font($color: $lime, $text-decoration: none);
    &:hover, &:focus {
        text-decoration: underline;
    }
}
.alpha, .omega {
    width: 50%;
}
.alpha { float: left; }
.omega { float: right; }
.close-button {
    cursor: pointer;
    &:hover {
        .fc-icon-close {
            @include font($color: $lime);
            @include scale(-1,1);
        }
    }
}

// ICONS /////////////////
// icon styles for fontcustom
.fc-icon {
    @include font($size: 54px, $color: #FFF);
    display: inline-block;
}
.fc-icon-close {
    @include single-transition(all, 0.2s, $ease-out-quad);
    @include scale(1,1);
    @include font($size: 47px);
}
.fc-icon-plus {
    @include font($color: #000, $size: 32px);
}

// CONTAINER /////////////
// holds everything. grid, about, project details, etc
#container {
    @include size(inherit, inherit);
    &.four-up {
        .grid-project { width: 25%; }
    }
    &.three-up {
        .grid-project { width: 33.333%; }
    }
    &.two-up {
        .grid-project { width: 50%; }
    }
    &.one-up {
        .grid-project { width: 100%; }
    }
}

// GRID //////////////////
#grid {
    @include size(inherit, inherit);
    position: relative;
    .grid-project {
        position: relative;
        z-index: 1;
        &.active {
            z-index: 2;
        }
    }
}
.grid-row-container {
    @include position-relative($z-index: 1);
    &.active {
        z-index: 2;
    }
    .grid-row {
        height: 100%;
    }
}

// GRID ITEM //////////////////
.grid-project {
    height: 100%;
    background-size: cover;
    float: left;
    z-index: 1;
    .selected-container {
        @include size($width: 100%, $height: 100%);
        position: absolute;
        overflow: hidden;
    }
    .selected-tip {
        @include single-transition(bottom, 0.25s, $ease-out-quad);
        @include position-absolute($bottom: -64px, $left: 50%, $z-index: 3);
        @include size-centered(111px, 66px);
        background: url(/images/selected.png) no-repeat;
    }
    .info {
        @include single-text-shadow(1px, 1px, 7px, false, $black);
    }
    &.animate {
        z-index: 2;
    }
    &.selected {
        .item-link {
            cursor: default;
        }
        .gradient, .info {
            opacity: 0 !important;
        }
        .more-info:before, .fc-icon-plus {
            right: -100px !important;
            bottom: -100px !important;
        }
        .selected-tip {
            bottom: -18px;
        }
    }
}
.item-link {
    @include position-absolute($z-index: 10);
    @include size(100%, 100%);
    display: block;
    overflow: hidden;
    .gradient {
        @include single-transition(opacity, 0.15s, linear);
        @include background-image(linear-gradient(transparent 25%, #000 100%));
        @include size(100%, 100%);
        @include position-absolute($z-index: 1);
        opacity: 0;
    }
    .info {
        @include single-transition(opacity, 0.15s, linear);
        @include position-absolute($bottom: 0, $z-index: 2);
        @include font($color: #FFF);
        padding: 0 100px $padding $padding;
        opacity: 0;
        .title {
            @include font($size: 24px);
            display: block;
            margin-bottom: 5px;
        }
        .client {
            @include font($size: 12px, $color: #CCC);
        }
        p {
            @include font($size: 14px);
            margin: 0;
        }
    }
    .more-info {
        .fc-icon-plus {
            @include transition(bottom 0.25s $ease-out-quad, right 0.25s $ease-out-quad);
            @include position-absolute($bottom: -100px, $right: -100px, $z-index: 3);
        }
        &:before {
            @include single-transition(all, 0.15s, $ease-out-quad);
            @include position-absolute($right: -100px, $bottom: -100px, $z-index: 2);
            border-right: 100px solid $lime;
            border-top: 100px solid transparent;
            width: 0;
            content: '';
        }
        &:hover {
            &:before {
                border-right: 100px solid $black;
            }
            .fc-icon-plus {
                color: #FFF;
            }
        }
    }
    &:hover, &:focus {
        .gradient, .info {
            opacity: 1;
        }
        .more-info:before {
            @include position-absolute($right: 0px, $bottom: 0px);
        }
        .fc-icon-plus {
            bottom: 10px;
            right: 12px;
        }
    }
}
.item-content {
    position: relative;
}

// ITEM CUBE ////////////////
.item-content, .item-cube-container, .item-cube, .item-cube .side {
    @include size(100%, 100%);
}
.item-cube-container {
    @include perspective(600px);
}
.item-cube {
    @include transform-style(preserve-3d);
    position: relative;
    .item-image {
        @include size(100%, 100%);
        background-size: cover;
    }
    img {
        @include size(1px, 1px);
        visibility: hidden;
        display: block;
        overflow: hidden;
    }
    .side {
        position: absolute;
        @include backface-visibility(hidden);
        &.one { z-index: 2; }
        &.two { z-index: 1; }
        &.archive, &.inactive {
            display: none;
        }
        &.archive, &.archive-active {
            &.one { z-index: 4; }
            &.two { z-index: 3; }
        }
    }
    &.animate {
        @include enable-fast-image-rendering();
        .side {
            @include enable-fast-image-rendering();
        }
    }
}

// PROJECT ///////////////////
.project-details {
    overflow: hidden;
    position: relative;
    .alpha, .omega {
        .project-details-inner {
            padding: $padding;
        }
    }
    .omega .project-details-inner {
        padding-left: 0px;
    }
    p {
        @include font($size: 16px, $line-height: 32px);
        margin: 0;
    }
    h1 {
        @include font($color: $lime, $weight: normal);
        margin: $padding $padding * 2 0 $padding;
    }
    h2 {
        @include font($color: $lime, $weight: normal, $size: 14px);
        margin: 0;
    }
    .top-row {
        div {
            float: left;
            margin-right: 30px;
        }
    }
    .tools {
        clear: both;
        padding-top: $padding;
    }
    .close-button {
        @include position-absolute($top: $padding - 10, $right: $padding - 10);
    }
}

// LOGO //////////////////////
#logo {
    @include position-fixed($z-index: 3);
    cursor: pointer;
    a {
        &:before {
            @include position-absolute($top: 0, $left: 0);
            border-top: 100px solid $black;
            border-right: 100px solid transparent;
            width: 0;
            content: '';
        }
        &:hover {
            &:before {
                border-top: 100px solid $lime;
            }
            .fc-icon {
                color: $black;
            }
        }
    }
    .fc-icon-logo-rotated {
        @include position-absolute($top: 4px, $left: 4px, $z-index: 1);
    }
}

// ABOUT ////////////////////

#about-details {
    .close-button {
        @include position-absolute($right: $padding, $top: $padding);
    }
    .fc-icon-logo-rotated {
        @include position-absolute($left: $padding, $top: 18px);
        float: left;
        font-size: 74px;
    }
    .column {
        width: 25%;
        float: left;
        padding-top: $padding;
    }
    #name {
        span {
            display: inline-block;
            margin-left: 130px;
        }
    }
}

// ANIMATIONS ////////////////
// TODO: create mixin for angular animations?
.csstransitions {
    .about-animation {
        height: 110px;
        overflow: hidden;
        &.ng-enter, &.ng-leave {
            @include single-transition(height, 0.5s, $ease-out-quad);
        }
        &.ng-enter { height: 0px; }
        &.ng-enter-active { height: 110px; }
        &.ng-leave { height: 110px; }
        &.ng-leave-active { height: 0px; }
    }
    .project-animation {
        max-height: 500px;
        &.ng-enter, &.ng-leave {
            @include single-transition(max-height, 0.5s, $ease-out-quad);
        }
        &.ng-enter { max-height: 0px; }
        &.ng-enter-active { max-height: 500px; }
        &.ng-leave { max-height: 500px; }
        &.ng-leave-active { max-height: 0px; }
    }
    .logo-animation {
        top: 0;
        left: 0;
        &.ng-enter, &.ng-leave {
            @include single-transition(top, 0.25s, $ease-out-quad);
            @include single-transition(left, 0.25s, $ease-out-quad);
        }
        &.ng-enter { top: -50px; left: -50px; }
        &.ng-enter-active { top: 0; left: 0; }
        &.ng-leave { top: 0; left: 0; }
        &.ng-leave-active { top: -50px; left: -50px; }
    }
    .item-load-animation {
        @include single-transition(all, 0.5s, $ease-out-quad);
        @include scale(1, 1);
        opacity: 1;
        &.ng-hide-add, &.ng-hide-remove {
            display: block !important;
        }
        &.ng-hide { @include scale(0,0); opacity: 0; }
        &.ng-show { @include scale(1,1); opacity: 1; }
    }
}